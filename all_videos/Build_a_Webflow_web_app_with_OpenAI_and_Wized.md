In today's video, we're going to learn how to build an AI-powered itinerary generator. We're going to use UIST and OpenAI to achieve this. Later, I'm going to show you how to clone this project if you want to inspect it and learn from it. Without any further ado, let's have a look at what we're going to be building. You can see here that the user can type in a destination, let's say Japan, and a start date and an end date for their holidays. Let's say they're going from tomorrow until the end of the week. And the budget is $4,000. And you can see if I generate an itinerary, it's going to communicate to the OpenAI GP3 engine and it's going to send an itinerary in return. And there we have it. We have each day of our holidays planned. Pretty cool. Now, let's learn how to build this with UIST. Note that we're not going to show you how to build this from scratch. We already added all of the UIST attributes inside of Webflow, for all of the fields that we need. So on the inputs, on the button, on the itinerary field, and so on. And also, we already added the UIST embed to the project. Note that you will need to create an account on OpenAI and you will need to submit your credit card information. In this case, I generated over 100 itineraries and it only cost me around $1. So if you're going to use this app yourself and you're not going to have too many users, it's not going to cost you much. All right, with that information out of the way, let's start building our app. The first thing we need to do is add a new app. In this case, I'm going to call it OpenAI. And here under app, I'm going to select REST, because it's a REST API that I'm going to be connecting to. Here under base URL, I need to get this information from the OpenAI documentation. So I'm going to look at the OpenAI API reference here, and in this case, I want to create a completion. I'm going to copy this part over here, and this is the base URL. Everything else are endpoints. I'm going to paste this in here, and now I can start building my first request. If we look at the docs once again, we can see that this createCompletionRequest is a POST request. Remember, POST requests are data out requests, so we have to go to data out. Here, we're going to add a new request, and we're going to call it submitTravelDetails. Or maybe we can call it postTravelDetails. Under app, we're going to select OpenAI, and under URL endpoint, we're going to add completions. We're going to paste it in here, and under method, we're going to select POST. Now let's have a look at an example request inside of their documentation, and see how we're supposed to populate these fields in Wiz. Here, we're going to look at curl requests, and we can see here that we have two key value pairs in the header, and the rest is in the body. So this H letter here signifies that this is the header, and the rest is in the body. Okay, cool. Now, let's do the same thing in Wiz. So we're going to copy this value over here, content type, and we're going to add it to the header of our request. Here, it said application.json, and the second value is the API key. We have here authorization, bearer, and then the API key. So we're going to copy that, paste it in here, and here we're going to write bearer, space, and here we have to add our API key. Now, if you created an OpenAI account, then you can go to your personal settings, and there you can find your API keys. To do that, you have to click here on your profile, view API keys, and here you can create a new secret key. Here, you can simply copy this key, and paste it into your request. Note that there's a space between bearer and your API key. All right. Also, we don't want our keys to be exposed so that anyone can inspect the site and steal them because otherwise they could build requests and it would charge you. So what we're going to do here is we're going to select that this value is a secret. Also, if we have secret values, we need to ensure that the request is being executed on the server. So we're going to select here, execute on server. What we did here is we ensured that the request on the front end is encrypted completely, and then on the UIST server, this request is getting executed. So anyone inspecting our site will never be able to get our API key. Next, let's build the body of the request. Let's head over to the documentation and see which fields we need to add here. Here on the request body, you can see all of the parameters that you can add to your request. Now, each one of these parameters is covered right below here. So you can read what each one of these does, but I'm going to use just a few of them. First, I'm going to use the model. And this specifies the AI model, which we would like to use. In my case, I would like to use the TextDaVinci003 model. This is their most capable model so far. So I'm going to write here model. And here below, I'm going to write TextDaVinci003. You can look also at their other models. Some of them are cheaper. Some of them are faster. You can see what each one of them does. Next, I'm going to add the temperature parameter. And I'm going to set this to zero. Now, if you change the temperature value, you might get different results. If the temperature is set to zero, you will always get predictable results. So if you write Japan and the same budget and the same date, you will always get the same response. If you write here one, you will get a different itinerary each and every time when you generate it. Next, we're going to set the top p value to one. Then we're going to add max tokens here. And this is the maximum number of tokens to generate the completion. Here, I'm going to write 3,400. And lastly, I'm going to add my prompt. This is the most important part, and this is the trickiest part. You'll have to experiment a little bit to see which results you'll get from your prompt. Now, in this case, I will not show you the whole process, how I experimented with different prompts. I'm just going to paste in the prompt that worked really well for this use case. Also, I'm going to explain the prompt and how it works. This needs to be a logic component, so I'm going to write here this double squiggly brackets at the beginning and at the end. And note that we also have these literals over here at the beginning and at the end. So far, this is a string. But inside here, we want to add the user's input. So what we have here is the start date, end date, destination, budget. This is exactly the same as what we're having down here. And then the rest of the prompt says, based on the above information, please generate a personalized travel itinerary in HTML format. Now here, I also added some details to make sure that the formatting is exactly as I wanted it, without a title tag and without an age one. For a trip to destination, from start date to end date, the itinerary should take into account the user's budget, state the estimated cost at the end as an H3. And this gave me pretty much satisfactory results. So now, how do we add our input values here? Well, it's pretty easy. We have to write dollar sign, squiggly brackets, and closing squiggly brackets. And this allows us to write variables inside here. So first here, we're going to add our start date. Then we're going to add our end date. We're going to do the same thing, dollar sign, squiggly brackets. And inside of this, we're going to add our end date. Then we're going to add our destination in the same way, and budget. Okay, now here we get a bunch of undefined values, but if we fill out this form down here, then we're going to see that the values that get propagated in our prompt are correct. So let's write here again, Japan, start date tomorrow until the 28th, and budget $4,000. If we open this field again, we can see here that the dates as well as the budget and everything else is getting propagated correctly. Cool. Now let's run this request to make sure that everything is set up correctly. Here under choices.text, we can see that we get the HTML that we need on our site. Cool. Now let's render this data in a rich text format on our site. So we're going to go to actions and we're going to build our first action. The first thing I want to do is display the wrapper for the rich text that's by default hidden. So here I'm going to call it display itinerary wrapper. And I'm going to apply this to the itinerary, to the itinerary wrapper element. Under configuration, I'm going to set the visibility and I'm going to make sure that the element is visible if the request was successful. So if status code equals 200. Perfect. And I'm also going to build a second action that's going to populate our rich text field. So here I'm going to call it render itinerary. I'm going to apply it to the itinerary element. And under configuration, I'm going to choose set text. In this case, HTML, because this is what we're getting from the response. And under text, I'm going to select our response field. Next, we're also going to need to build an action that's going to trigger our request submission. So here we're going to call it submit travel details. And we're going to apply it to our submit button. Under configuration, we're going to choose on click, perform request, and we're going to perform the request that we just created, post travel details. Cool, if we refresh our canvas now and we fill out our details, we can see that it looks like nothing's really happening, but the request is being executed in the background. This is because OpenAI takes quite a while to give us a response. So we need to show some kind of loader to the user so that they don't feel like the app is not working. All right, now let's add our loader. In Webflow, I created a shimmer loader and you can see here how it looks. Now by default, that's hidden, but we want to show this loader while the request is being executed. To do that, we're going to go to actions and here I'm going to call it display loader. We're going to apply it to every element which has this loader attribute, which is the shimmer loader that I just showed you and a small text block that says that this might take up to 30 seconds. Under configuration, I'm going to select set visibility and I'm going to make the element visible if our first request is requesting. Right now, you can see the value is false, but if I try to run this request, it changes to true. Cool, and if I refresh the canvas now and I try to write in some details here, we can see here that the loader gets displayed and then when the request is successful, the loader disappears and our itinerary is being shown. And that's it. This is how you can build an app using OpenAI's GPT-3 model. Cool. Next, I'm going to show you how to clone this project. You'll need three things. You'll need to clone first the Webflow instance, then you'll need to create an account on openai.com and submit your billing details and finally, you'll need to clone the UIST instance. So, here I have a cloned instance of the project and now it's time to clone the UIST project. You can find the link in the description below or on the uist.com page. Once you click on the cloning link, this is going to appear. You have to specify to which workspace you want to add the project. In this case, I'm going to add the project to workspace one and I'm going to hit clone. And now I can see here this Wunderlust clone will appear right over here. Now it's time to complete the configuration. Here, I have a project setup that's exactly the same as when you're starting a new project. First, I have to add a name. Here, I'm going to call it Wunderlust itinerary generator. And now I have to specify the staging domain. Here, I'm going to paste the domain of the Webflow project that I just cloned. And finally, I have to add this embed to my Webflow project. So I'm going to hit copy over here. Then I'll open the project settings of my Webflow project. I'll go to custom code and I'm going to paste it in the head. Now I have to save the changes, publish the project. And once the project is published, I can click on the continue button. And there we go. Our project has been cloned. Now, the only thing that you need to modify here is this data out request. You can see here we have this post travel details request and you're going to need to add your authentication token right over here. So here we have bearer and we have our API token. And here, you're going to have to add your API token. And that you can find in your OpenAI dashboard. All you have to do is go here under account settings, view API keys, and here you can generate a new secret key. This will give you a brand new API key. You can simply copy it and paste it in here. Now you can hit done and the project will be working. You can see here if we add some details, that will be able to generate an itinerary. And that's it. Thank you so much for watching and I'll see you in the next one. Cheers. ♪♪♪