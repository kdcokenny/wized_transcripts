The first thing we're going to learn in this series is how to set up authentication using Xano on the back end and WSD on the front end. First we're going to start by setting up login and sign up forms but then we're going to bring this concept one step further. We'll also teach you how to set up loaders while the request is being executed and how to display error messages if the user has a typo. From there we're going to move to authenticated requests which means that only if the user is logged in they can access some data from our back end. And finally we're going to cover some advanced access control rules because we have two types of users in our app. We have customers and suppliers and we want to prevent customers from logging into the supplier dashboard and vice versa. Now I'm super excited to dive into this project with you and without any further ado let's jump right into it. Awesome so we're in our Webflow project and if you look at all the elements you'll see that we already have all of the WSD attributes applied so we're not starting entirely from scratch. Note that we made a separate video where we're explaining how to use these WSD attributes but you can see here if we look at all the elements that the WSD attributes are applied but also we're having some hidden elements to which we also added WSD attributes. One of these examples is this loader component which I'm going to toggle quickly so you can see how it looks and we're going to display that while the user is logging in. Also we have an error message below here which I'm not going to show you right now but note that it is also there it's just hidden. All right so without further ado let's jump into WSD and let's set this up and running. So the first thing we have to do here is we have to add Xano to my apps. So here we're going to write Xano and from drop down we're going to select Xano. Here you have to add the API group base URL and this you can find inside of your Xano account. So let's head over to Xano and if we go to API and we click on our default API group we can see that we have this link over here. So we're going to copy that to clipboard and we're going to paste it in here. Awesome now we can start using Xano to make requests, set up our authentication and so on. So let's go over to the auth panel and here we're going to start by expanding this accordion over here. Under app we're going to select Xano which we just added and we can start building our first request. But before we do that let's head over to our signup page and here you can really see what's going on. So if we toggle x-ray mode you can see here that we have all of the attributes from Webflow. Awesome. Let's turn this off and let's start building our first request. We're going to start with the create new user request and here you can see that if we click on this it creates a request in data out and most of the fields are already pre-filled for us. Now the only thing we have to do here is we have to provide the inputs and you can see here that by default we have email and password but if we look at our form we have an additional field. This additional field is something we also want to collect from the user and we also set this up in Xano on the back end. If we look at our signup request we can see here that we have this input, full name, email and password. So let's add full name to the inputs there. Okay now that our fields are matching let's provide the values. Now the values will be provided by the user so all we have to do here is we have to bind the inputs to these fields. So let's expand this data field and if we go under general input fields we can find our signup and login inputs. So let's choose here signup email address for the email, signup password for the password and here under full name we're going to choose signup full name. Awesome. Note that in this request we only have to provide the input fields. These url parameters as well as authorization fields are reserved for other types of requests. We're going to cover authorization in a little bit. All right now our request is already set up so if we add a full name here like and we change this email here we should be able to trigger this request. So let's expand this field here and let's look at the response and if we click here you can see we get an auth token in response. Now what does that mean and how does all of this work? So basically we need to have a way of telling the backend that the user is still logged in when they move from page to page and this is where this auth token comes in. We get this auth token after a signup or a login and then this auth token is stored in a cookie so that when the user goes from page to page the cookie is used to tell the backend hey it's still me I'm still logged in. So what we have to do here is we have to first create a new cookie which will save this auth token. All right so let's go to page data and let's create that cookie. We're gonna go under cookies and here we're gonna create a new cookie. I'm simply gonna call it token and here I have to specify a lifetime. In this case we want to keep it to something short like one day or one week. In my case I want to keep it to one week. Now that we have our cookie let's head back to our request. We have to trigger an after request action here. So after request we want to set a cookie. Now we only want to set a cookie if the request was successful. So we're gonna add this conditional here and under condition we're gonna write the following. We're gonna click on this status code over here and we want to make sure that the status code equals 200 just like in this case. Status code 200 simply means that the request was successful. If you have another number it's usually an error. All right let's write equals equals equals 200. Awesome and we can see below here that this statement evaluates to true. So if this condition evaluates true we want to do the following action. We want to set our cookie and we'll set our cookie to the auth token value. So we can click here on auth token and that's it. Now whenever a user signs up this auth token will be automatically stored in a cookie. Perfect now we have to do one more thing. We also want to redirect the user to the home page once they sign up. So let's expand this field over here. Let's select navigate to and here we're simply gonna write the home page url. Now also just like in the first action we want to make sure that the request was successful. Otherwise if the user wasn't successfully logged in we don't want to redirect the user to the home page. So let's add a condition here and again we're gonna write status code equals equals equals 200. Perfect now whenever a new user signs up they will be redirected to the home page. Awesome let's set up the same thing for our logging form now. So let's go to auth and now we have this template for login user. So let's click on the plus sign and we have our pre-build request and we're gonna do the same thing. We have to provide only an email and password in this case. So let's go here under input fields login email and here we're gonna select login password. I'll just switch quickly to the login page just so you can see what's going on and if we toggle x-ray mode you can see here that we have pretty much the same setup. And just like we did in our first request we have to make sure to store the auth token after the request was successful inside of a cookie. We already created our cookie so all we have to do here is add an action. Here we're gonna choose set cookie and we can run this request because these fields are already filled out with autofill. And also here you can see that we also get an auth token the only difference is that we have our second request. So request number two and we have the auth token. So let's expand this field and let's select the auth token. Awesome. And here we have to select our cookie which we created earlier ctoken and here under is conditional we're gonna add the same condition like we did before. So if the request was successful. Now make sure to select the second request here. Equals equals equals 200. Done. And also we're gonna redirect the user to the home page if the request was successful. So navigate to is conditional. We can just copy this value from here. Paste it in and here we're gonna redirect the user to the home page. So this is the home page path. Awesome. That's it. Now the last thing we have to do is apply actions. So when the user clicks this login button we want to submit these fields to the backend. So let's set that up and running. We're gonna go to actions and here we're gonna create a new action. And also let's create a folder and we're gonna call it auth. So all of our auth actions will be in the auth folder. Now we can select this folder and here we can call it submit login. And we're gonna apply it to our login button. And under configuration we're gonna choose on click. So it's an on click event and under action we're gonna choose perform request login request. So when the login button is clicked we'll perform our login request. Awesome. And now let's do the same thing for signup. We're gonna choose auth. We're gonna apply it to our submit button. And under configuration we're gonna choose on click, perform request, create new user in this case. Perfect. And we have the basic functionality there. So if we expand this field and we refresh the canvas to apply our action we should be able to use this button to log in. So let's look at this login user request and let's click on the button. So we should get an auth token that should get saved in the cookie and we should be redirected to the home page. Now all of this will happen really fast. There we go. And right now we still have to do a few more things. We also want to display a loader while the user is being logged in and we want to display an error message in case the user had a typo or they simply didn't fill out an input field. So let's set that up and running. Let's go back to our login page and here we're going to add some more actions. So the first action will be called display loader. And we're gonna apply this to our button loader. And under configuration we're simply going to toggle the visibility. Set visibility and we want the loader to be visible if the request is currently being executed. So we're going to select isRequesting. Awesome. Now we also want another condition. If the request was successful it will take some time until the user gets redirected to the home page. So in that period we also want to display the loader. So we're going to add here one more condition. So we're going to write if this is true, meaning if the request is currently being executed or if the request hasRequested is true, and if the request was successful. Status code equals equals equals 200. So this is our first condition and this is our second condition. So we're checking if hasRequested, so meaning if the request was finished, and if the request was successful. So either if this condition is true or this condition is true we're going to display that loader. All right, now note that I added the same attribute on the signup and the email form. So here we have this logic for our first request which is create new user and let's do the same thing for our other request for login user. So we're simply going to copy this same logic and all we're going to do is we're going to replace this number one with number two. So our first request has number one, our second request has number two. So let's add here or and then we choose the same values here. So isRequesting is true or hasRequested and status code equals 200. Perfect. Now we can hit save and now if we refresh the canvas and we click on the login button we should see our loader appear. And there we go, it already looks much better. So let's head back to our login request and let's also display the error message here. So it's actually quite similar to the display loader logic. So we're going to create here a new action, we're going to call it displayErrorMessage and here we're going to add it also to the Auth folder. We're going to apply it to our error, AuthError attribute and here we're going to set the configuration to set visibility first, visible if, and now we have to basically get the error field. To do that, we can simply close this and write here just anything and now if we try to change this, we can see that it's not working. So let's go back to our login request and we're going to do the same thing for our second request. So let's expand this field, let's go under configuration and visible if we're going to expand this field and let's run our request. And now we can see we got an error. So we want to display this field if there was an error and we also want to toggle the visibility if there was an error on our other form because the same attribute is applied to both forms. So we're going to write here or and we can just copy this value and write number one. So we have these requests which are very similar and this is our first request here, this is our second request. Perfect. Okay, now the error message will be visible but we also have to set the text of the error. So we're going to click here on this plus sign and here we're going to choose set text, plain text and here we're going to get the text from the error message. Here we have this message field and inside we have invalid credentials. Perfect. And now let's do the same thing for our first request. So we're going to write here or and we're going to display the message from the first request if there is an error in the first request. Perfect. Now we can hit close and now if we refresh the canvas again we should be able to see an error message. So let's write some gibberish here, let's click on login and now we can see we have the loader as well as this error message at the bottom. Now that we have our login and signup functionality in place let's head over to our auth panel and here we're going to add another request which is called load user and this load user request basically loads the data of the user that's currently logged in. So if we click on this plus sign we're going to create a new data in request and here you can see that we get all these fields populated and all we have to do here is we have to provide an authorization token. Luckily we already saved our auth token in the cookie so all we have to do here is reference that cookie. So let's expand this field, let's go under general and here we have our cookie value. So remember we're storing that value in the cookie for a certain period of time. So let's select this and let's hit done. Perfect. And now if we try to run the request we should get the information of the user that's currently logged in. In this case I have a fake email called Kate's Cliffjumper. And you can see here we get the id of the user, the full name, the email and so on. Now we can configure this stuff on the backend however we want but in this case we have just a few fields. Awesome. Now we have to set up a trigger. Here we have to choose on which pages do we want this request to be triggered and we want this request to execute as soon as the page loads. So here we're going to choose on page load and here we're going to select on every page where we have this load user attribute. So we have on page load and we're going to execute this request if there is a load user attribute. Awesome. And here if we wanted we could add some actions for after this request has been executed. We're going to do that a little bit later but for now we can just close this request. So now if we go from page to page we can expand the page data field so we can see what's going on. If we go to another page we should see that request being executed. So it happens really quickly but you can see here it loads the user right at the beginning. Awesome. Now let's head back to the auth panel and here if we expand access control rules we can add some access control rules. This is used for protecting different pages so if the user is not logged in we want to redirect that user back to the login page. So that's the basic functionality that we want to implement here. So let's get started. First we want to add this access control rule to our admin dashboard because we want this admin dashboard to be protected and here we have to add a condition. We're going to expand this field and the first thing we're going to check is we're going to check if the user was successfully loaded. So we're going to select here status code equals equals equals 200. But this alone wouldn't work out of the box because while the request is being executed there is no status code. So this statement would automatically redirect the user to the login page which we don't want. So we also have to add here another condition. Here we're going to check first isRequesting so if the request is currently being executed we want to keep the user on this page. Or if the status code is 200. But we're missing here one more piece of the puzzle. So here we're going to write also or hasRequested and status code equals 200. So now we have the same statement that you saw before already. So if the request is currently being executed or if the request has finished and it was successful, awesome. Otherwise if that's not the case we want the user